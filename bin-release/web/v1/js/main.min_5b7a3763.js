var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},__awaiter=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(r,a){function s(t){try{g(n.next(t))}catch(e){a(e)}}function o(t){try{g(n["throw"](t))}catch(e){a(e)}}function g(t){t.done?r(t.value):new i(function(e){e(t.value)}).then(s,o)}g((n=n.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function i(t){return function(e){return n([t,e])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;g;)try{if(r=1,a&&(s=a[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(a,i[1])).done)return s;switch(a=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return g.label++,{value:i[1],done:!1};case 5:g.label++,a=i[1],i=[0];continue;case 7:i=g.ops.pop(),g.trys.pop();continue;default:if(s=g.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){g=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){g.label=i[1];break}if(6===i[0]&&g.label<s[1]){g.label=s[1],s=i;break}if(s&&g.label<s[2]){g.label=s[2],g.ops.push(i);break}s[2]&&g.ops.pop(),g.trys.pop();continue}i=e.call(t,g)}catch(n){i=[6,n],a=0}finally{r=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,a,s,o,g={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o},BaseFruit=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.img=new egret.Bitmap,this.img_part1=new egret.Bitmap,this.img_part2=new egret.Bitmap,this.img_part3=new egret.Bitmap,this.img_part4=new egret.Bitmap,this.img_part5=new egret.Bitmap,this.img_part6=new egret.Bitmap,this.img_part7=new egret.Bitmap,this.img_part8=new egret.Bitmap,this.addChild(this.img),this.accelerateX=0,this.accelerateY=700,this.accelerateRotate=0,this.speedX=180*(Math.random()-.5),this.speedY=-700,this.speedRotate=360*(Math.random()-.5);var t=Math.floor(2*Math.random());0==t?(this.speedX=720,this.x=this.initX=-100):(this.speedX=-720,this.x=this.initX=GameData.stageWidth+100),this.y=this.initY=Math.floor(Math.random()*(GameData.stageHeight-500)+400),this.addEventListener(egret.Event.ENTER_FRAME,this.freeFalling,this),this.beginTime=egret.getTimer(),this.touchEnabled=!0,this.cutIndex=!1},e.prototype.freeFalling=function(t){var e=(egret.getTimer()-this.beginTime)/1e3;this.x=this.initX+e*this.speedX,this.y=this.speedY*e+.5*this.accelerateY*e*e+this.initY,this.img.rotation=e*this.speedRotate,this.y>530&&!this.cutIndex&&(this.cutIndex=!0)},e.prototype.setSize=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.img.anchorOffsetX=this.img.width/2,this.img.anchorOffsetY=this.img.height/2;for(var t=1;8>=t;t++){var e=this["img_part"+t];e.anchorOffsetX=this.img.width/2,e.anchorOffsetY=this.img.height/2}},e.prototype.cutFruit=function(){this.cutIndex=!0,this.cutEffect(),this.addCutSound()},e.prototype.splitEffect=function(){var t=RES.getRes("star3_png"),e=RES.getRes("fireworks_json");this.cutSystem=new particle.GravityParticleSystem(t,e),this.cutSystem.emissionTime=1e3,this.cutSystem.x=this.img.x-this.img.width,this.cutSystem.y=this.img.y-1.5*this.img.height,this.addChild(this.cutSystem),this.cutSystem.start()},e.prototype.addCutSound=function(){var t=RES.getRes("fruitbingo_mp3");t.play(0,1)},e.prototype.cutEffect=function(){this.img.parent&&this.removeChild(this.img);for(var t=1;8>=t;t++){var e=this["img_part"+t];this.addChild(e)}this.splitEffect(),egret.setTimeout(function(){this.cutSystem.parent&&this.removeChild(this.cutSystem)},this,500),this.addEventListener(egret.Event.ENTER_FRAME,this.cutFreeFalling,this)},e.prototype.splashEffectFun=function(){if(this.splashColor){this.splashEffect=new SplashEffect(this.splashColor);this.splashEffect.x=this.x-35,this.splashEffect.y=this.y-35;egret.setTimeout(function(){this.splashEffect.parent&&this.parent.removeChild(this.splashEffect)},this,400)}},e.prototype.cutFreeFalling=function(){if(this.img_part1.parent)for(var t=1;8>=t;t++){var e=this["img_part"+t];t%2==0?(e.x+=2,e.rotation+=2):(e.x-=2,e.rotation-=2)}},e.prototype.addScore=function(){},e.prototype.addFailed=function(){},e}(egret.DisplayObjectContainer);__reflect(BaseFruit.prototype,"BaseFruit");var GameObject=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.update=function(t){},e}(egret.DisplayObjectContainer);__reflect(GameObject.prototype,"GameObject");var BaseRotateFruit=function(t){function e(){var e=t.call(this)||this;return e.init(),e}return __extends(e,t),e.prototype.init=function(){this.img=new egret.Bitmap,this.img_part1=new egret.Bitmap,this.img_part2=new egret.Bitmap,this.img_part3=new egret.Bitmap,this.img_part4=new egret.Bitmap,this.img_part5=new egret.Bitmap,this.img_part6=new egret.Bitmap,this.img_part7=new egret.Bitmap,this.img_part8=new egret.Bitmap,this.addChild(this.img),this.x=this.y=0,this.flyPoint=new egret.Point(0,0)},e.prototype.setSize=function(){this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.img.anchorOffsetX=0,this.img.anchorOffsetY=0},e.prototype.cutFruit=function(t){this.cutEffect(t)},e.prototype.splitEffect=function(t){var e=RES.getRes("star"+t+"_png"),i=RES.getRes("fireworks_json");this.cutSystem=new particle.GravityParticleSystem(e,i),this.cutSystem.emissionTime=1e3,this.cutSystem.x=this.img.x-this.img.width,this.cutSystem.y=this.img.y-this.img.height,this.addChild(this.cutSystem),this.cutSystem.start()},e.prototype.addCutSound=function(){var t=RES.getRes("fruitbingo_mp3");t.play(0,1)},e.prototype.cutEffect=function(t){this.img.parent&&this.removeChild(this.img);for(var e=1;8>=e;e++){var i=this["img_part"+e];this.addChild(i),e%2==0?i.x+=10:i.x-=10}this.splitEffect(t),egret.setTimeout(function(){this.cutSystem.parent&&this.removeChild(this.cutSystem),this.cutFreeFalling()},this,200)},e.prototype.splashEffectFun=function(){if(this.splashColor){this.splashEffect=new SplashEffect(this.splashColor);this.splashEffect.x=this.x-35,this.splashEffect.y=this.y-35;egret.setTimeout(function(){this.splashEffect.parent&&this.removeChild(this.splashEffect)},this,1e3)}},e.prototype.cutFreeFalling=function(){if(this.parent){var t=FruitNewGamePage.getInstance();egret.Tween.get(this).to({x:t.grpjuice.x+t.grpjuice.width/2+30,y:t.grpjuice.y+50},380,egret.Ease.sineIn).call(this.removePartImg,this),egret.Tween.get(this).to({scaleX:.5,scaleY:.5},380)}},e.prototype.removePartImg=function(){this.parent&&(GameUtil.bPlaySound()&&GameUtil.playSound("fruityes_mp3"),this.parent.removeChild(this));var t=FruitNewGamePage.getInstance();t&&t.beiziAnimate()},e.prototype.addScore=function(){},e.prototype.addFailed=function(){},e}(egret.DisplayObjectContainer);__reflect(BaseRotateFruit.prototype,"BaseRotateFruit");var ShopBarItemRender=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/KnifeWidget.exml",e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&this.RefreshDataInfo(this.data)},e.prototype.RefreshDataInfo=function(t){this.imgprop.texture=GameUtil.getTextureByName(this.data.texture),this.imgbg.texture=GameUtil.getTextureByName(this.data.bgtexture),this.imgselect.visible=1==t.type?!0:!1},e}(eui.ItemRenderer);__reflect(ShopBarItemRender.prototype,"ShopBarItemRender");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,i,n){function r(t){e.call(n,t)}function a(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}var s=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,i){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(n,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var o=t.split("/");o.pop();var g=o.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(n,generateJSON.paths[t])},this):RES.getResByUrl(g,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){e.call(n,generateJSON.paths[t])},s)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var GameUtil=function(){function t(){}return t.createButton=function(t){var e=new egret.DisplayObjectContainer,i=this.createBitmapByName("button_png"),n=this.createText(t);return e.addChild(i),e.addChild(n),n.x=i.width/2,n.y=i.height/2,e.touchEnabled=!0,e.touchChildren=!1,e.anchorOffsetX=i.width/2,e.anchorOffsetY=i.height/2,e},t.createText=function(t){var e=new egret.TextField;return e.text=t,e.size=120,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e},t.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},t.getTextureByName=function(t){var e=RES.getRes(t);return e},t.showSceneAnimation=function(t){t.scaleX=.1,t.scaleY=.1,egret.Tween.get(t).to({scaleX:1.1,scaleY:1.1},300,egret.Ease.sineOut).to({scaleX:1,scaleY:1},80,egret.Ease.sineIn)},t.playSound=function(t){var e=RES.getRes(t);e.play(0,1)},t.bPlaySound=function(){var t=egret.localStorage.getItem("soundON");return null==t||"true"===t?!0:!1},t.bShake=function(){var t=egret.localStorage.getItem("shakeON");return null==t||"true"===t?!0:!1},t}();__reflect(GameUtil.prototype,"GameUtil");var ClassName=function(){function t(){}return t.APPLE=function(){return new Apple},t.BANANA=function(){return new Banana},t.BASAHA=function(){return new Basaha},t.PEACH=function(){return new Peach},t.SANDIA=function(){return new Sandia},t.COCONUT=function(){return new Coconut},t.KIWI=function(){return new Kiwi},t.LEMON=function(){return new Lemon},t.LIME=function(){return new Lime},t.ORANGE=function(){return new Orange},t.PINEAPPLE=function(){return new Pineapple},t.PLUM=function(){return new Plum},t.POMEGRANATE=function(){return new Pomegranate},t.REAAPPLE=function(){return new RedApple},t.TOMATO=function(){return new Tomato},t.APPLEROTATE=function(){return new AppleRotate},t.BANANAROTATE=function(){return new BananaRotate},t.BASAHAROTATE=function(){return new BasahaRotate},t.PEACHROTATE=function(){return new PeachRotate},t.SANDIAROTATE=function(){return new SandiaRotate},t.COCONUTROTATE=function(){return new CoconutRotate},t.KIWIROTATE=function(){return new KiwiRotate},t.LEMONROTATE=function(){return new LemonRotate},t.LIMEROTATE=function(){return new LimeRotate},t.ORANGEROTATE=function(){return new OrangeRotate},t.PINEAPPLEROTATE=function(){return new PineappleRotate},t.PLUMROTATE=function(){return new PlumRotate},t.POMEGRANATEROTATE=function(){return new PomegranateRotate},t.REAAPPLEROTATE=function(){return new RedAppleRotate},t.TOMATOROTATE=function(){return new TomatoRotate},t}();__reflect(ClassName.prototype,"ClassName");var Commands=function(){function t(){}return t.OPEN_NEWGAME="open_newgame",t.OPEN_JODO="open_jodo",t.OPEN_QUIT="open_quit",t.OPEN_CONTINUE="open_continue",t.CLOSE_NEWGAME="close_newgame",t.CLOSE_JODO="close_jodo",t.CLOSE_QUIT="close_quit",t.CLOSE_CONTINUE="close_continue",t.OPNE_SETTING="open_setting",t.CLOSE_SETTING="close_setting",t.OPEN_RANK="open_rank",t.CLOSE_RANK="close_rank",t.OPEN_LEVELSELECT="open_levelselect",t.CLOSE_LEVELSELECT="close_levelselect",t.OPEN_SHOP="open_shop",t.CLOSE_SHOP="close_shop",t.OPEN_REPLAY="open_replay",t.CLOSE_REPLAY="close_replay",t.OPEN_GIFT="open_gift",t.CLOSE_GIFT="close_gift",t.OPEN_RESULT="open_result",t.CLOSE_RESULT="close_result",t.OPEN_AWARD="open_award",t.CLOSE_AWARD="close_award",t.OPEN_NEW_GAME="open_newgame",t.CLOSE_NEW_GAME="close_newgame",t.ADD_SCORE="add_score",t.ADD_FAILED="add_failed",t.GAME_OVER="game_over",t}();__reflect(Commands.prototype,"Commands");var BoomEffect=function(t){function e(e){var i=t.call(this)||this;return i.lightNum=8,i.lightRotation=[],i.lightRotationOrder=[],i.index=0,i.lightArray=[],i.fruitObj=e,i.init(),i.getLightRotation(),i.getOrder(),i.addBoomSound(),i.addLight(),i.addWhiteBg(),i}return __extends(e,t),e.prototype.init=function(){this.width=1280,this.height=960,this.anchorOffsetX=640,this.anchorOffsetY=480},e.prototype.getLightRotation=function(){for(var t=360/this.lightNum,e=0;e<this.lightNum;e++)this.lightRotation.push(Math.random()*t*.5+.25*t+t*e)},e.prototype.addBoomSound=function(){var t=RES.getRes("boom_mp3");t.play(0,1)},e.prototype.getOrder=function(){for(var t=[],e=0;e<this.lightNum;e++)t.push(this.lightRotation[e]);for(var e=8;e>0;e--){var i=Math.floor(Math.random()*e);this.lightRotationOrder.push(t[i]),t.splice(i,1)}},e.prototype.addLight=function(){if(this.timer&&egret.clearTimeout(this.timer),this.index<this.lightNum){var t=this.createLight();t.rotation=this.lightRotationOrder[this.index++],this.lightArray.push(t),this.addChild(t),this.timer=egret.setTimeout(this.addLight,this,200)}},e.prototype.createLight=function(){var t=new egret.Shape;return t.graphics.beginFill(16777193,1),t.graphics.moveTo(0,17),t.graphics.lineTo(640,0),t.graphics.lineTo(640,40),t.graphics.lineTo(0,23),t.graphics.endFill(),t.anchorOffsetX=0,t.anchorOffsetY=20,t.x=640,t.y=480,t},e.prototype.addWhiteBg=function(){var t=new egret.Shape;t.graphics.beginFill(16777215,1),t.graphics.drawRect(0,0,640,480),t.graphics.endFill(),egret.setTimeout(function(){this.stage.addChild(t);for(var e=(egret.Tween.get(t).to({alpha:0},3e3).call(function(){this.stage.removeChild(t),Observer.getInstance().fire(Commands.GAME_OVER)}),0);e<this.lightNum;e++)this.removeChild(this.lightArray[e]);GameContainer.getInstance().removeChild(this.fruitObj)},this,200*this.lightNum)},e}(egret.DisplayObjectContainer);__reflect(BoomEffect.prototype,"BoomEffect");var Effects;!function(t){function e(t,e,i){var n=function(){var i=t.y;egret.Tween.get(t).to({y:i+10},e/2,egret.Ease.circIn).to({y:i},e/2,egret.Ease.circOut).call(n,this)},r=t.y;i?egret.Tween.get(t).to({y:r+10},e/2,egret.Ease.circIn).to({y:r},e/2,egret.Ease.circOut).call(n,this):egret.Tween.get(t).to({y:r+10},e/2,egret.Ease.circIn).to({y:r},e/2,egret.Ease.circOut)}function i(t,e,i,n){var r=n?1:-1,a=function(){t.rotation=0,egret.Tween.get(t).to({rotation:360*r},e).call(a,this)};i?(t.rotation=0,egret.Tween.get(t).to({rotation:360*r},e).call(a,this)):(t.rotation=0,egret.Tween.get(t).to({rotation:360*r},e))}t.floatUpdown=e,t.rotate=i}(Effects||(Effects={}));var Scar=function(){function t(t){this.moveCount=0,this.hasThrow=!1,this.prePointX=-1,this.prePointY=-1,this.thisObj=t,t.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.addScar,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.moveEnd,this)}return t.prototype.addScar=function(t){if(this.moveCount++,!this.hasThrow&&this.moveCount>10){var e=RES.getRes("throw_mp3");e.play(0,1);this.hasThrow=!0}if(this.prePointX>0&&this.prePointY>0){var i=Math.floor(Math.sqrt((this.prePointY-t.stageY)*(this.prePointY-t.stageY)+(this.prePointX-t.stageX)*(this.prePointX-t.stageX))),n=57.3*Math.atan((t.stageY-this.prePointY)/(t.stageX-this.prePointX));if(this.prePointX>t.stageX){var r=new egret.Shape;r.graphics.lineStyle(8,14540485),r.graphics.moveTo(0,0),r.graphics.lineTo(i,0),r.graphics.endFill()}else{var r=new egret.Shape;r.graphics.lineStyle(9,14540485),r.graphics.moveTo(0,0),r.graphics.lineTo(-i,0),r.graphics.endFill()}r.x=t.stageX,r.y=t.stageY,r.anchorOffsetX=4.5,r.rotation=n,this.thisObj.addChild(r);var a=this.thisObj;egret.Tween.get(r).to({scaleY:0},300).call(function(){a.removeChild(r),r=null})}this.prePointX=t.stageX,this.prePointY=t.stageY},t.prototype.moveEnd=function(){this.prePointX=-1,this.prePointY=-1,this.moveCount=0,this.hasThrow=!1},t.getInstance=function(e){return void 0===this._instance&&(this._instance=new t(e)),this._instance},t.destroyInstance=function(){this._instance=void 0},t}();__reflect(Scar.prototype,"Scar");var Sparkle=function(t){function e(e){var i=t.call(this)||this;return i.emitterX=60,i.emitterY=60,i.emission=e,i.width=2*i.emitterX,i.height=2*i.emitterY,i.anchorOffsetX=i.emitterX,i.anchorOffsetY=i.emitterY,i.start(),i}return __extends(e,t),e.prototype.start=function(){this.sparkleTimer=new egret.Timer(this.emission,0),this.sparkleTimer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.sparkleTimer.start()},e.prototype.timerFunc=function(){this.addChild(this.creatParticle())},e.prototype.creatParticle=function(){var t=new eui.Image;t.source="flash_png",t.width=25,t.height=7,t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=this.emitterX,t.y=this.emitterY,t.rotation=360*Math.random();var e=t.rotation/180*Math.PI;return egret.Tween.get(t).to({x:this.emitterX*(Math.cos(e)+1),y:this.emitterX*(Math.sin(e)+1),scaleX:.2,scaleY:.2},100*(Math.random()-.5)+400).call(function(){this.parent.removeChild(this)},t),t},e}(eui.Component);__reflect(Sparkle.prototype,"Sparkle");var SplashEffect=function(t){function e(e){var i=t.call(this)||this;return i.splashColor=e,i.start(),i}return __extends(e,t),e.prototype.start=function(){for(var t=0;10>t;t++){var e=2*Math.random()+4,i=300*Math.random()+200,n=360*Math.random(),r=new Splash(e,i,n,this.splashColor);this.addChild(r)}},e}(egret.DisplayObjectContainer);__reflect(SplashEffect.prototype,"SplashEffect");var Splash=function(t){function e(e,i,n,r){var a=t.call(this)||this;a.radius=e,a.speed=i,a.direction=n,a.splashColor=r,a.init(),a.initX=a.x,a.initY=a.y;egret.Tween.get(a).to({scaleX:.5,scaleY:.5},390).call(function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.updateLocation,this)});return a.beginTime=egret.getTimer(),a.addEventListener(egret.Event.ENTER_FRAME,a.updateLocation,a),a}return __extends(e,t),e.prototype.init=function(){this.graphics.beginFill(this.splashColor,1),this.graphics.drawCircle(0,0,this.radius),this.graphics.endFill()},e.prototype.updateLocation=function(){this.x=this.initX+this.speed*(egret.getTimer()-this.beginTime)/1e3*Math.cos(this.direction/57.3),this.y=this.initY-this.speed*(egret.getTimer()-this.beginTime)/1e3*Math.sin(this.direction/57.3)},e}(egret.Shape);__reflect(Splash.prototype,"Splash");var Apple=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("apple_png"),e.img_part1.texture=RES.getRes("apple-1_png"),e.img_part2.texture=RES.getRes("apple-2_png"),e.img_part3.texture=RES.getRes("apple-3_png"),e.img_part4.texture=RES.getRes("apple-4_png"),e.img_part5.texture=RES.getRes("apple-5_png"),e.img_part6.texture=RES.getRes("apple-6_png"),e.img_part7.texture=RES.getRes("apple-7_png"),e.img_part8.texture=RES.getRes("apple-8_png"),e.initRotation=-45,e.rotationIndex=0,e.splashColor=8897296,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Apple.prototype,"Apple");var Banana=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("banana_png"),e.img_part1.texture=RES.getRes("banana-1_png"),e.img_part2.texture=RES.getRes("banana-2_png"),e.img_part3.texture=RES.getRes("banana-3_png"),e.img_part4.texture=RES.getRes("banana-4_png"),e.img_part5.texture=RES.getRes("banana-5_png"),e.img_part6.texture=RES.getRes("banana-6_png"),e.img_part7.texture=RES.getRes("banana-7_png"),e.img_part8.texture=RES.getRes("banana-8_png"),e.initRotation=90,e.rotationIndex=1,e.splashColor=null,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Banana.prototype,"Banana");var Basaha=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("strawberry_png"),e.img_part1.texture=RES.getRes("strawberry-1_png"),e.img_part2.texture=RES.getRes("strawberry-2_png"),e.img_part3.texture=RES.getRes("strawberry-3_png"),e.img_part4.texture=RES.getRes("strawberry-4_png"),e.img_part5.texture=RES.getRes("strawberry-5_png"),e.img_part6.texture=RES.getRes("strawberry-6_png"),e.img_part7.texture=RES.getRes("strawberry-7_png"),e.img_part8.texture=RES.getRes("strawberry-8_png"),e.initRotation=45,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Basaha.prototype,"Basaha");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,i){function n(n){e.call(i,n,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?n(r):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Coconut=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("coconut_png"),e.img_part1.texture=RES.getRes("coconut-1_png"),e.img_part2.texture=RES.getRes("coconut-2_png"),e.img_part3.texture=RES.getRes("coconut-3_png"),e.img_part4.texture=RES.getRes("coconut-4_png"),e.img_part5.texture=RES.getRes("coconut-5_png"),e.img_part6.texture=RES.getRes("coconut-6_png"),e.img_part7.texture=RES.getRes("coconut-7_png"),e.img_part8.texture=RES.getRes("coconut-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Coconut.prototype,"Coconut");var Kiwi=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("kiwi"),e.img_part1.texture=RES.getRes("Kiwi-1_png"),e.img_part2.texture=RES.getRes("Kiwi-2_png"),e.img_part3.texture=RES.getRes("Kiwi-3_png"),e.img_part4.texture=RES.getRes("Kiwi-4_png"),e.img_part5.texture=RES.getRes("Kiwi-5_png"),e.img_part6.texture=RES.getRes("Kiwi-6_png"),e.img_part7.texture=RES.getRes("Kiwi-7_png"),e.img_part8.texture=RES.getRes("Kiwi-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Kiwi.prototype,"Kiwi");var Lemon=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("lemon"),e.img_part1.texture=RES.getRes("lemon-1_png"),e.img_part2.texture=RES.getRes("lemon-2_png"),e.img_part3.texture=RES.getRes("lemon-3_png"),e.img_part4.texture=RES.getRes("lemon-4_png"),e.img_part5.texture=RES.getRes("lemon-5_png"),e.img_part6.texture=RES.getRes("lemon-6_png"),e.img_part7.texture=RES.getRes("lemon-7_png"),e.img_part8.texture=RES.getRes("lemon-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Lemon.prototype,"Lemon");var Lime=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("lime_png"),e.img_part1.texture=RES.getRes("lime-1_png"),e.img_part2.texture=RES.getRes("lime-2_png"),e.img_part3.texture=RES.getRes("lime-3_png"),e.img_part4.texture=RES.getRes("lime-4_png"),e.img_part5.texture=RES.getRes("lime-5_png"),e.img_part6.texture=RES.getRes("lime-6_png"),e.img_part7.texture=RES.getRes("lime-7_png"),e.img_part8.texture=RES.getRes("lime-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Lime.prototype,"Lime");var Orange=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("orange_png"),e.img_part1.texture=RES.getRes("orange-1_png"),e.img_part2.texture=RES.getRes("orange-2_png"),e.img_part3.texture=RES.getRes("orange-3_png"),e.img_part4.texture=RES.getRes("orange-4_png"),e.img_part5.texture=RES.getRes("orange-5_png"),e.img_part6.texture=RES.getRes("orange-6_png"),e.img_part7.texture=RES.getRes("orange-7_png"),e.img_part8.texture=RES.getRes("orange-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Orange.prototype,"Orange");var Peach=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("pear_png"),e.img_part1.texture=RES.getRes("pear-1_png"),e.img_part2.texture=RES.getRes("pear-2_png"),e.img_part3.texture=RES.getRes("pear-3_png"),e.img_part4.texture=RES.getRes("pear-4_png"),e.img_part5.texture=RES.getRes("pear-5_png"),e.img_part6.texture=RES.getRes("pear-6_png"),e.img_part7.texture=RES.getRes("pear-7_png"),e.img_part8.texture=RES.getRes("pear-8_png"),e.initRotation=-45,e.rotationIndex=0,e.splashColor=16287245,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Peach.prototype,"Peach");var Pineapple=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("pineapple_png"),e.img_part1.texture=RES.getRes("pineapple-1_png"),e.img_part2.texture=RES.getRes("pineapple-2_png"),e.img_part3.texture=RES.getRes("pineapple-3_png"),e.img_part4.texture=RES.getRes("pineapple-4_png"),e.img_part5.texture=RES.getRes("pineapple-5_png"),e.img_part6.texture=RES.getRes("pineapple-6_png"),e.img_part7.texture=RES.getRes("pineapple-7_png"),e.img_part8.texture=RES.getRes("pineapple-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Pineapple.prototype,"Pineapple");var Plum=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("plum_png"),e.img_part1.texture=RES.getRes("plum-1_png"),e.img_part2.texture=RES.getRes("plum-2_png"),e.img_part3.texture=RES.getRes("plum-3_png"),e.img_part4.texture=RES.getRes("plum-4_png"),e.img_part5.texture=RES.getRes("plum-5_png"),e.img_part6.texture=RES.getRes("plum-6_png"),e.img_part7.texture=RES.getRes("plum-7_png"),e.img_part8.texture=RES.getRes("plum-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Plum.prototype,"Plum");var Pomegranate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("pomegranate_png"),e.img_part1.texture=RES.getRes("pomegranate-1_png"),e.img_part2.texture=RES.getRes("pomegranate-2_png"),e.img_part3.texture=RES.getRes("pomegranate-3_png"),e.img_part4.texture=RES.getRes("pomegranate-4_png"),e.img_part5.texture=RES.getRes("pomegranate-5_png"),e.img_part6.texture=RES.getRes("pomegranate-6_png"),e.img_part7.texture=RES.getRes("pomegranate-7_png"),e.img_part8.texture=RES.getRes("pomegranate-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Pomegranate.prototype,"Pomegranate");var RedApple=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("redApple_png"),e.img_part1.texture=RES.getRes("redApple-1_png"),e.img_part2.texture=RES.getRes("redApple-2_png"),e.img_part3.texture=RES.getRes("redApple-3_png"),e.img_part4.texture=RES.getRes("redApple-4_png"),e.img_part5.texture=RES.getRes("redApple-5_png"),e.img_part6.texture=RES.getRes("redApple-6_png"),e.img_part7.texture=RES.getRes("redApple-7_png"),e.img_part8.texture=RES.getRes("redApple-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(RedApple.prototype,"RedApple");var Sandia=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("watermelon_png"),e.img_part1.texture=RES.getRes("watermelon-1_png"),e.img_part2.texture=RES.getRes("watermelon-2_png"),e.img_part3.texture=RES.getRes("watermelon-3_png"),e.img_part4.texture=RES.getRes("watermelon-4_png"),e.img_part5.texture=RES.getRes("watermelon-5_png"),e.img_part6.texture=RES.getRes("watermelon-6_png"),e.img_part7.texture=RES.getRes("watermelon-7_png"),e.img_part8.texture=RES.getRes("watermelon-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Sandia.prototype,"Sandia");var Tomato=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("tomato_png"),e.img_part1.texture=RES.getRes("tomato-1_png"),e.img_part2.texture=RES.getRes("tomato-2_png"),e.img_part3.texture=RES.getRes("tomato-3_png"),e.img_part4.texture=RES.getRes("tomato-4_png"),e.img_part5.texture=RES.getRes("tomato-5_png"),e.img_part6.texture=RES.getRes("tomato-6_png"),e.img_part7.texture=RES.getRes("tomato-7_png"),e.img_part8.texture=RES.getRes("tomato-8_png"),e.initRotation=85,e.rotationIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseFruit);__reflect(Tomato.prototype,"Tomato");var GameContainer=function(t){function e(){var e=t.call(this)||this;return e.prePointX=-1,e.prePointY=-1,e.init(),e}return __extends(e,t),e.prototype.init=function(){},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance=void 0},e}(egret.DisplayObjectContainer);__reflect(GameContainer.prototype,"GameContainer");var GameData=function(){function t(){}return t.elements=[],t.rounds=0,t.angle=0,t.rotation=0,t.flatSpeed=10,t.stageWidth=0,t.stageHeight=0,t.arrRotate=[6,8,9],t.sType="classic",t.iClassicLevel=1,t.strDefaultProp="propwen_png",t.iWinNum=0,t.iTotalNum=4,t.strImgName="",t.giftImgArr=["1_2_png","2_2_png","3_2_png","4_2_png","5_2_png","6_2_png","7_2_png","8_2_png","9_2_png","10_2_png","11_2_png","12_2_png","13_2_png","14_2_png","15_2_png","16_2_png","17_2_png","18_2_png","19_2_png","20_2_png"],t.shopImgArr=["knife1_png","knife2_png","knife3_png","knife4_png","knife5_png","knife6_png","knife7_png","knife8_png","knife9_png","knife10_png","knife11_png","knife12_png"],t.juicerArr1=["green_1_png","green_2_png","green_3_png","green_4_png","green_5_png","green_6_png","green_7_png","green_8_png","green_9_png"],t.juicerArr2=["Orange_1_png","Orange_2_png","Orange_3_png","Orange_4_png","Orange_5_png","Orange_6_png","Orange_7_png","Orange_8_png","Orange_9_png"],t.juicerArr3=["Orangered_1_png","Orangered_2_png","Orangered_3_png","Orangered_4_png","Orangered_5_png","Orangered_6_png","Orangered_7_png","Orangered_8_png","Orangered_9_png"],t.juicerArr4=["red_1_png","red_2_png","red_3_png","red_4_png","red_5_png","red_6_png","red_7_png","red_8_png","red_9_png"],t.juicerArr5=["white_1_png","white_2_png","white_3_png","white_4_png","white_5_png","white_6_png","white_7_png","white_8_png","white_9_png"],t.juicerArr6=["yellow_1_png","yellow_2_png","yellow_3_png","yellow_4_png","yellow_5_png","yellow_6_png","yellow_7_png","yellow_8_png","yellow_9_png"],t.shopPropBg=["propbg1_png","propbg2_png"],t.channelBg=null,t.cosArr=[.9998476951563913,.9993908270190958,.9986295347545738],t.sinArr=[.01745240643728351,.03489949670250097,.05233595624294383],t.bWuXianOpenWin=!1,t.bWuXianKnifeZero=!1,t}();__reflect(GameData.prototype,"GameData");var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=i.sent(),this.startAnimation(t),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return e=i.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,RES.loadGroup("loading")];case 2:return i.sent(),t=new LoadingUI,this.stage.addChild(t),[4,this.loadTheme()];
case 3:return i.sent(),[4,RES.loadGroup("preload",0,t)];case 4:return i.sent(),this.stage.removeChild(t),[3,6];case 5:return e=i.sent(),console.error(e),[3,6];case 6:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,i){var n=new eui.Theme("resource/default.thm.json",t.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){GameData.stageWidth=this.stage.stageWidth,GameData.stageHeight=this.stage.stageHeight,this.stage.frameRate=240,this.fruithomePage=FruitHomePage.getInstance(),this.addChild(this.fruithomePage),this.sceneManager=new SceneManager,this.gameManager=new GameManager},e.prototype.createBitmapByName=function(t){var e=new egret.Bitmap,i=RES.getRes(t);return e.texture=i,e},e.prototype.startAnimation=function(t){var e=this,i=new egret.HtmlTextParser,n=t.map(function(t){return i.parse(t)}),r=this.textfield,a=-1,s=function(){a++,a>=n.length&&(a=0);var t=n[a];r.textFlow=t;var i=egret.Tween.get(r);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(s,e)};s()},e.prototype.onButtonClick=function(t){var e=new eui.Panel;e.title="Title",e.horizontalCenter=0,e.verticalCenter=0,this.addChild(e)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var Knife=function(t){function e(e){var i=t.call(this)||this;return i.init(e),i}return __extends(e,t),e.prototype.init=function(t){this._role=GameUtil.createBitmapByName(t),this.addChild(this._role)},e.prototype.fly=function(){this.y-=5*GameData.flatSpeed,egret.Tween.get(this,{loop:!0}).to({rotation:360},130)},e.prototype.update=function(t){this.fly()},e}(GameObject);__reflect(Knife.prototype,"Knife");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.BitmapText;var t=RES.getRes("num_fnt");this.textField.text="0%",this.textField.font=t,this.textField.textAlign="center",this.textField.x=330,this.textField.y=570,this.textField.width=130,this.textField.height=100;var e=new egret.Bitmap(RES.getRes("loadingBG_jpg"));this.addChild(e),this.load=new egret.Bitmap(RES.getRes("loading_json.loading_icon_png")),this.load.anchorOffsetX=this.load.width/2,this.load.anchorOffsetY=this.load.height/2,this.load.x=GameData.stageWidth/2,this.load.y=GameData.stageHeight/2,this.addChild(this.load),this.loadBar2=new egret.Bitmap(RES.getRes("loading_json.loading_bar1_png")),this.loadBar2.x=GameData.stageWidth/2+this.loadBar2.width/2+100,this.loadBar2.y=GameData.stageHeight/2+this.loadBar2.height+150,this.addChild(this.loadBar2),this.loadBar=new egret.Bitmap(RES.getRes("loading_json.loading_bar2_png")),this.loadBar.x=GameData.stageWidth/2+this.loadBar.width/2+100,this.loadBar.y=GameData.stageHeight/2+this.loadBar.height+150,this.addChild(this.loadBar)},e.prototype.onProgress=function(t,e){this.textField.text=Math.ceil(t/e*100).toString()+"%";var i=this.getSectorProgress(Math.ceil(t/e*360));this.addChild(i),this.loadBar.mask=i,this.addChild(this.textField)},e.prototype.getSectorProgress=function(t){function e(t){n.graphics.clear(),n.graphics.beginFill(16711680),n.graphics.moveTo(i.loadBar.x,i.loadBar.y),n.graphics.lineTo(i.loadBar.x+i.loadBar.width/2,i.loadBar.y+i.loadBar.height/2),n.graphics.drawArc(i.loadBar.x+i.loadBar.width/2,i.loadBar.y+i.loadBar.height/2,i.loadBar.width/2,0,t*Math.PI/180),n.graphics.lineTo(i.loadBar.x+i.loadBar.width/2,i.loadBar.y+i.loadBar.height/2),n.graphics.endFill()}var i=this,n=new egret.Shape;return e(t),n},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var GameManager=function(){function t(){this.registObserver()}return t.prototype.registObserver=function(){Observer.getInstance().regist(Commands.ADD_SCORE,this.addScore,this),Observer.getInstance().regist(Commands.ADD_FAILED,this.addFailed,this),Observer.getInstance().regist(Commands.GAME_OVER,this.gameOver,this)},t.prototype.addScore=function(){var t=FruitNewGamePage.getInstance();t.scoreCount+=1,t.gameScore.text=String(t.scoreCount)},t.prototype.addFailed=function(){var t=FruitNewGamePage.getInstance();t.failedCount+=1,1==t.failedCount||2==t.failedCount||3==t.failedCount&&Observer.getInstance().fire(Commands.GAME_OVER)},t.prototype.gameOver=function(){GameContainer.getInstance();this.fruitNewGamePage=FruitNewGamePage.getInstance();egret.Tween.get(this.fruitNewGamePage.gameover).to({scaleX:1,scaleY:1,alpha:1},500,egret.Ease.backOut)},t.prototype.quitGamePage=function(){this.fruitNewGamePage.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.quitGamePage,this),Observer.getInstance().fire(Commands.CLOSE_NEWGAME)},t}();__reflect(GameManager.prototype,"GameManager");var Observer=function(){function t(){this._messages=[]}return t.prototype.regist=function(t,e,i){var n={fn:e,content:i};"undefined"==typeof this._messages[t]?this._messages[t]=[n]:this._messages[t].push(n)},t.prototype.fire=function(t,e){if(this._messages[t])for(var i={commandKey:t,args:e||{}},n=0;n<this._messages[t].length;n++)this._messages[t][n].fn.call(this._messages[t][n].content,i)},t.prototype.remove=function(t,e,i){var n={fn:e,content:i};if(this._messages[t]instanceof Array)for(var r=this._messages[t].length-1;r>=0;r--)this._messages[t][r]===n&&this._messages[t].splice(r,1)},t.getInstance=function(){return void 0===this._instance&&(this._instance=new t),this._instance},t}();__reflect(Observer.prototype,"Observer");var SceneManager=function(){function t(){this.registObserver()}return t.prototype.registObserver=function(){Observer.getInstance().regist(Commands.CLOSE_QUIT,this.closeQuit,this),Observer.getInstance().regist(Commands.OPEN_QUIT,this.openQuit,this),Observer.getInstance().regist(Commands.CLOSE_GIFT,this.closeGift,this),Observer.getInstance().regist(Commands.OPEN_GIFT,this.openGift,this),Observer.getInstance().regist(Commands.CLOSE_REPLAY,this.closeReplay,this),Observer.getInstance().regist(Commands.OPEN_REPLAY,this.openReplay,this),Observer.getInstance().regist(Commands.CLOSE_CONTINUE,this.closeContinue,this),Observer.getInstance().regist(Commands.OPEN_CONTINUE,this.openContinue,this),Observer.getInstance().regist(Commands.OPNE_SETTING,this.openSetting,this),Observer.getInstance().regist(Commands.CLOSE_SETTING,this.closeSetting,this),Observer.getInstance().regist(Commands.OPEN_RANK,this.openRank,this),Observer.getInstance().regist(Commands.CLOSE_RANK,this.closeRank,this),Observer.getInstance().regist(Commands.OPEN_LEVELSELECT,this.openLevelSelect,this),Observer.getInstance().regist(Commands.CLOSE_LEVELSELECT,this.closeLevelSelect,this),Observer.getInstance().regist(Commands.OPEN_SHOP,this.openShop,this),Observer.getInstance().regist(Commands.CLOSE_SHOP,this.closeShop,this),Observer.getInstance().regist(Commands.OPEN_NEW_GAME,this.openNewGame,this),Observer.getInstance().regist(Commands.CLOSE_NEW_GAME,this.closeNewGame,this),Observer.getInstance().regist(Commands.OPEN_RESULT,this.openResult,this),Observer.getInstance().regist(Commands.CLOSE_RESULT,this.closeResult,this),Observer.getInstance().regist(Commands.OPEN_AWARD,this.openAward,this),Observer.getInstance().regist(Commands.CLOSE_AWARD,this.closeAward,this)},t.prototype.openSetting=function(){console.log("openSetting openSetting openSetting openSetting openSetting");var t=FruitHomePage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e&&e.removeChild(t),FruitHomePage.destroyInstance();var i=SettingPage.getInstance();e.addChild(i)},this,e+100)},t.prototype.closeSetting=function(){console.log("closeSetting closeSetting closeSetting closeSetting closeSetting");var t=SettingPage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e&&e.removeChild(t),SettingPage.destroyInstance();var i=FruitHomePage.getInstance();e.addChild(i)},this,e+100)},t.prototype.openRank=function(){console.log("openRank openRank openRank openRank openRank");var t=FruitHomePage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e.removeChild(t),FruitHomePage.destroyInstance();var i=RankPage.getInstance();e.addChild(i)},this,e+100)},t.prototype.closeRank=function(){console.log("closeRank closeRank closeRank closeRank closeRank");var t=RankPage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e.removeChild(t),RankPage.destroyInstance();var i=FruitHomePage.getInstance();e.addChild(i)},this,e+100)},t.prototype.openLevelSelect=function(){console.log("openLevelSelect openLevelSelect openLevelSelect openLevelSelect openLevelSelect");var t=FruitHomePage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e&&e.removeChild(t),FruitHomePage.destroyInstance();var i=LevelSelectPage.getInstance();e&&e.addChild(i)},this,e+100)},t.prototype.closeLevelSelect=function(){console.log("closeLevelSelect closeLevelSelect closeLevelSelect closeLevelSelect closeLevelSelect");var t=LevelSelectPage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e.removeChild(t),LevelSelectPage.destroyInstance();var i=FruitHomePage.getInstance();e.addChild(i)},this,e+100)},t.prototype.openShop=function(){console.log("openShop openShop openShop openShop openShop");var t=FruitHomePage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e.removeChild(t),FruitHomePage.destroyInstance();var i=ShopPage.getInstance();e.addChild(i)},this,e+100)},t.prototype.closeShop=function(){console.log("closeShop closeShop closeShop closeShop closeShop");var t=ShopPage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e&&e.removeChild(t),ShopPage.destroyInstance();var i=FruitHomePage.getInstance();e.addChild(i)},this,e+100)},t.prototype.openNewGame=function(){var t=LevelSelectPage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e&&e.removeChild(t),LevelSelectPage.destroyInstance();var i=FruitNewGamePage.getInstance();e.addChild(i)},this,e+100)},t.prototype.closeNewGame=function(){console.log("closeNewGame closeNewGame closeNewGame closeNewGame closeNewGame");var t=500,e=FruitNewGamePage.getInstance(),i=FruitQuitPage.getInstance();i&&(FruitQuitPage.destroyInstance(),egret.ticker.resume());var n=ContinuePage.getInstance();n&&ContinuePage.destroyInstance(),egret.setTimeout(function(){var t=e.parent;t&&t.removeChild(e),FruitNewGamePage.destroyInstance();var i=FruitHomePage.getInstance();t&&t.addChild(i);var n=LevelSelectPage.getInstance();n&&LevelSelectPage.destroyInstance()},this,t+100)},t.prototype.openQuit=function(){console.log("openQuit openQuit openQuit openQuit openQuit");var t=FruitNewGamePage.getInstance(),e=500;egret.setTimeout(function(){var e=FruitQuitPage.getInstance();t.addChildAt(e,999),egret.ticker.pause()},this,e+100)},t.prototype.closeQuit=function(){console.log("closeQuit closeQuit closeQuit closeQuit closeQuit");var t=FruitQuitPage.getInstance(),e=500;egret.ticker.resume(),egret.setTimeout(function(){var e=t.parent;e&&e.removeChild(t),FruitQuitPage.destroyInstance()},this,e+100)},t.prototype.openContinue=function(){console.log("openContinue openContinue openContinue openContinue openContinue");var t=FruitNewGamePage.getInstance(),e=500;egret.setTimeout(function(){var e=ContinuePage.getInstance();t.addChild(e)},this,e+100)},t.prototype.closeContinue=function(){console.log("closeContinue closeContinue closeContinue closeContinue closeContinue");var t=ContinuePage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e&&e.removeChild(t),ContinuePage.destroyInstance()},this,e+100)},t.prototype.openReplay=function(){console.log("openReplay openReplay openReplay openReplay openReplay");var t=FruitNewGamePage.getInstance(),e=500;egret.setTimeout(function(){var e=FruitReplayPage.getInstance();t.addChild(e)},this,e+100)},t.prototype.closeReplay=function(){console.log("closeReplay closeReplay closeReplay closeReplay closeReplay");var t=FruitReplayPage.getInstance(),e=FruitNewGamePage.getInstance(),i=500;egret.setTimeout(function(){var i=t.parent;i&&i.removeChild(t),FruitReplayPage.destroyInstance(),e&&e.resetData()},this,i+100)},t.prototype.openGift=function(){console.log("openGift openGift openGift openGift openGift");var t=FruitNewGamePage.getInstance(),e=500;egret.setTimeout(function(){var e=FruitGiftPage.getInstance();t.addChildAt(e,999)},this,e+100)},t.prototype.closeGift=function(){console.log("closeGift closeGift closeGift closeGift closeGift");var t=FruitGiftPage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e&&e.removeChild(t),FruitGiftPage.destroyInstance()},this,e+100)},t.prototype.openResult=function(){console.log("openResult openResult openResult openResult openResult");var t=FruitGiftPage.getInstance(),e=FruitResultPage.getInstance(),i=500;egret.setTimeout(function(){var i=t.parent;i.removeChild(t),FruitGiftPage.destroyInstance(),i.addChild(e)},this,i+100)},t.prototype.closeResult=function(){console.log("closeResult closeResult closeResult closeResult closeResult");var t=FruitResultPage.getInstance(),e=500;egret.setTimeout(function(){var e=t.parent;e&&e.removeChild(t),FruitResultPage.destroyInstance()},this,e+100)},t.prototype.openAward=function(){console.log("openAward openAward openAward openAward openAward");var t=FruitNewGamePage.getInstance(),e=500;egret.setTimeout(function(){var e=NewAwardPage.getInstance();t.addChildAt(e,999)},this,e+100)},t.prototype.closeAward=function(){if(console.log("closeAward closeAward closeAward closeAward closeAward"),"dare"===GameData.sType){NewAwardPage.destroyInstance();var t=FruitNewGamePage.getInstance(),e=t.parent;e&&e.removeChild(t),FruitNewGamePage.destroyInstance();var i=LevelSelectPage.getInstance();e&&e.addChild(i)}else{var n=NewAwardPage.getInstance(),r=-100;egret.setTimeout(function(){var t=n.parent;t&&t.removeChild(n),NewAwardPage.destroyInstance()},this,r+100)}},t}();__reflect(SceneManager.prototype,"SceneManager");var AppleRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("apple_png"),e.img_part1.texture=RES.getRes("apple-1_png"),e.img_part2.texture=RES.getRes("apple-2_png"),e.img_part3.texture=RES.getRes("apple-3_png"),e.img_part4.texture=RES.getRes("apple-4_png"),e.img_part5.texture=RES.getRes("apple-5_png"),e.img_part6.texture=RES.getRes("apple-6_png"),e.img_part7.texture=RES.getRes("apple-7_png"),e.img_part8.texture=RES.getRes("apple-8_png"),e.initRotation=-45,e.rotationIndex=0,e.effectIndex=1,e.splashColor=8897296,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(AppleRotate.prototype,"AppleRotate");var BananaRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("banana_png"),e.img_part1.texture=RES.getRes("banana-1_png"),e.img_part2.texture=RES.getRes("banana-2_png"),e.img_part3.texture=RES.getRes("banana-3_png"),e.img_part4.texture=RES.getRes("banana-4_png"),e.img_part5.texture=RES.getRes("banana-5_png"),e.img_part6.texture=RES.getRes("banana-6_png"),e.img_part7.texture=RES.getRes("banana-7_png"),e.img_part8.texture=RES.getRes("banana-8_png"),e.initRotation=90,e.rotationIndex=1,e.effectIndex=3,e.splashColor=null,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(BananaRotate.prototype,"BananaRotate");var BasahaRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("strawberry_png"),e.img_part1.texture=RES.getRes("strawberry-1_png"),e.img_part2.texture=RES.getRes("strawberry-2_png"),e.img_part3.texture=RES.getRes("strawberry-3_png"),e.img_part4.texture=RES.getRes("strawberry-4_png"),e.img_part5.texture=RES.getRes("strawberry-5_png"),e.img_part6.texture=RES.getRes("strawberry-6_png"),e.img_part7.texture=RES.getRes("strawberry-7_png"),e.img_part8.texture=RES.getRes("strawberry-8_png"),e.initRotation=45,e.rotationIndex=1,e.effectIndex=6,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(BasahaRotate.prototype,"BasahaRotate");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var CoconutRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("coconut_png"),e.img_part1.texture=RES.getRes("coconut-1_png"),e.img_part2.texture=RES.getRes("coconut-2_png"),e.img_part3.texture=RES.getRes("coconut-3_png"),e.img_part4.texture=RES.getRes("coconut-4_png"),e.img_part5.texture=RES.getRes("coconut-5_png"),e.img_part6.texture=RES.getRes("coconut-6_png"),e.img_part7.texture=RES.getRes("coconut-7_png"),e.img_part8.texture=RES.getRes("coconut-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=2,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(CoconutRotate.prototype,"CoconutRotate");var KiwiRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("kiwi_png"),e.img_part1.texture=RES.getRes("kiwi-1_png"),e.img_part2.texture=RES.getRes("kiwi-2_png"),e.img_part3.texture=RES.getRes("kiwi-3_png"),e.img_part4.texture=RES.getRes("kiwi-4_png"),e.img_part5.texture=RES.getRes("kiwi-5_png"),e.img_part6.texture=RES.getRes("kiwi-6_png"),e.img_part7.texture=RES.getRes("kiwi-7_png"),e.img_part8.texture=RES.getRes("kiwi-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=2,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(KiwiRotate.prototype,"KiwiRotate");var LemonRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("lemon_png"),e.img_part1.texture=RES.getRes("lemon-1_png"),e.img_part2.texture=RES.getRes("lemon-2_png"),e.img_part3.texture=RES.getRes("lemon-3_png"),e.img_part4.texture=RES.getRes("lemon-4_png"),e.img_part5.texture=RES.getRes("lemon-5_png"),e.img_part6.texture=RES.getRes("lemon-6_png"),e.img_part7.texture=RES.getRes("lemon-7_png"),e.img_part8.texture=RES.getRes("lemon-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=3,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(LemonRotate.prototype,"LemonRotate");var LimeRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("lime_png"),e.img_part1.texture=RES.getRes("lime-1_png"),e.img_part2.texture=RES.getRes("lime-2_png"),e.img_part3.texture=RES.getRes("lime-3_png"),e.img_part4.texture=RES.getRes("lime-4_png"),e.img_part5.texture=RES.getRes("lime-5_png"),e.img_part6.texture=RES.getRes("lime-6_png"),e.img_part7.texture=RES.getRes("lime-7_png"),e.img_part8.texture=RES.getRes("lime-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(LimeRotate.prototype,"LimeRotate");var OrangeRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("orange_png"),e.img_part1.texture=RES.getRes("orange-1_png"),e.img_part2.texture=RES.getRes("orange-2_png"),e.img_part3.texture=RES.getRes("orange-3_png"),e.img_part4.texture=RES.getRes("orange-4_png"),e.img_part5.texture=RES.getRes("orange-5_png"),e.img_part6.texture=RES.getRes("orange-6_png"),e.img_part7.texture=RES.getRes("orange-7_png"),e.img_part8.texture=RES.getRes("orange-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=5,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(OrangeRotate.prototype,"OrangeRotate");var PeachRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("pear_png"),e.img_part1.texture=RES.getRes("pear-1_png"),e.img_part2.texture=RES.getRes("pear-2_png"),e.img_part3.texture=RES.getRes("pear-3_png"),e.img_part4.texture=RES.getRes("pear-4_png"),e.img_part5.texture=RES.getRes("pear-5_png"),e.img_part6.texture=RES.getRes("pear-6_png"),e.img_part7.texture=RES.getRes("pear-7_png"),e.img_part8.texture=RES.getRes("pear-8_png"),e.initRotation=-45,e.rotationIndex=0,e.effectIndex=1,e.splashColor=16287245,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(PeachRotate.prototype,"PeachRotate");var PineappleRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("pineapple_png"),e.img_part1.texture=RES.getRes("pineapple-1_png"),e.img_part2.texture=RES.getRes("pineapple-2_png"),e.img_part3.texture=RES.getRes("pineapple-3_png"),e.img_part4.texture=RES.getRes("pineapple-4_png"),e.img_part5.texture=RES.getRes("pineapple-5_png"),e.img_part6.texture=RES.getRes("pineapple-6_png"),e.img_part7.texture=RES.getRes("pineapple-7_png"),e.img_part8.texture=RES.getRes("pineapple-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=3,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(PineappleRotate.prototype,"PineappleRotate");var PlumRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("plum_png"),e.img_part1.texture=RES.getRes("plum-1_png"),e.img_part2.texture=RES.getRes("plum-2_png"),e.img_part3.texture=RES.getRes("plum-3_png"),e.img_part4.texture=RES.getRes("plum-4_png"),e.img_part5.texture=RES.getRes("plum-5_png"),e.img_part6.texture=RES.getRes("plum-6_png"),e.img_part7.texture=RES.getRes("plum-7_png"),e.img_part8.texture=RES.getRes("plum-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=4,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(PlumRotate.prototype,"PlumRotate");var PomegranateRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("pomegranate_png"),e.img_part1.texture=RES.getRes("pomegranate-1_png"),e.img_part2.texture=RES.getRes("pomegranate-2_png"),e.img_part3.texture=RES.getRes("pomegranate-3_png"),e.img_part4.texture=RES.getRes("pomegranate-4_png"),e.img_part5.texture=RES.getRes("pomegranate-5_png"),e.img_part6.texture=RES.getRes("pomegranate-6_png"),e.img_part7.texture=RES.getRes("pomegranate-7_png"),e.img_part8.texture=RES.getRes("pomegranate-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=6,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(PomegranateRotate.prototype,"PomegranateRotate");var RedAppleRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("redapple_png"),e.img_part1.texture=RES.getRes("redapple-1_png"),e.img_part2.texture=RES.getRes("redapple-2_png"),e.img_part3.texture=RES.getRes("redapple-3_png"),e.img_part4.texture=RES.getRes("redapple-4_png"),e.img_part5.texture=RES.getRes("redapple-5_png"),e.img_part6.texture=RES.getRes("redapple-6_png"),e.img_part7.texture=RES.getRes("redapple-7_png"),e.img_part8.texture=RES.getRes("redapple-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=6,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(RedAppleRotate.prototype,"RedAppleRotate");var SandiaRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("watermelon_png"),e.img_part1.texture=RES.getRes("watermelon-1_png"),e.img_part2.texture=RES.getRes("watermelon-2_png"),e.img_part3.texture=RES.getRes("watermelon-3_png"),e.img_part4.texture=RES.getRes("watermelon-4_png"),e.img_part5.texture=RES.getRes("watermelon-5_png"),e.img_part6.texture=RES.getRes("watermelon-6_png"),e.img_part7.texture=RES.getRes("watermelon-7_png"),e.img_part8.texture=RES.getRes("watermelon-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=1,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(SandiaRotate.prototype,"SandiaRotate");var TomatoRotate=function(t){function e(){var e=t.call(this)||this;return e.img.texture=RES.getRes("tomato_png"),e.img_part1.texture=RES.getRes("tomato-1_png"),e.img_part2.texture=RES.getRes("tomato-2_png"),e.img_part3.texture=RES.getRes("tomato-3_png"),e.img_part4.texture=RES.getRes("tomato-4_png"),e.img_part5.texture=RES.getRes("tomato-5_png"),e.img_part6.texture=RES.getRes("tomato-6_png"),e.img_part7.texture=RES.getRes("tomato-7_png"),e.img_part8.texture=RES.getRes("tomato-8_png"),e.initRotation=85,e.rotationIndex=1,e.effectIndex=4,e.splashColor=16711680,e.setSize(),e}return __extends(e,t),e}(BaseRotateFruit);__reflect(TomatoRotate.prototype,"TomatoRotate");var NewAwardPage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/AwardPage.exml",e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=egret.localStorage.getItem("goldNum");this.lblgold.text=null==t?"0":t,"classic"===GameData.sType?(this.imgpic.visible=!0,this.imggold1.visible=!1,this.imggold2.visible=!1,this.imggold3.visible=!1,this.lblscore.visible=!1,this.imgpic.texture=GameUtil.getTextureByName(GameData.strImgName)):(this.imgpic.visible=!1,this.imggold1.visible=!0,this.imggold2.visible=!0,this.imggold3.visible=!0,this.lblscore.visible=!0),this.countdown=3;var e=new egret.Timer(1e3,this.countdown);e.addEventListener(egret.TimerEvent.TIMER,this.onTimerHandler,this),e.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),e.start()},e.prototype.onTimerHandler=function(t){this.countdown--},e.prototype.timerComFunc=function(){"dare"===GameData.sType&&(GameData.bWuXianOpenWin=!1,GameData.bWuXianKnifeZero=!1),Observer.getInstance().fire(Commands.CLOSE_AWARD)},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance&&(this._instance=void 0)},e}(eui.Component);__reflect(NewAwardPage.prototype,"NewAwardPage");var BaseScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e}(eui.Component);__reflect(BaseScene.prototype,"BaseScene");var ContinuePage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/ContinuePage.exml",e.init(),e.countdown=9,e.timer=new egret.Timer(1e3,9),e.timer.addEventListener(egret.TimerEvent.TIMER,e.onTimerHandler,e),e.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,e.timerComFunc,e),e.timer.start(),e}return __extends(e,t),e.prototype.init=function(){this.addEvents()},e.prototype.onTimerHandler=function(t){this.lbltime.text="0"+this.countdown,this.countdown--},e.prototype.timerComFunc=function(){Observer.getInstance().fire(Commands.CLOSE_NEW_GAME)},e.prototype.addEvents=function(){this.lblNoThanks.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Observer.getInstance().fire(Commands.CLOSE_NEW_GAME)},this),this.btngroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Observer.getInstance().fire(Commands.CLOSE_CONTINUE)},this)},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance&&(this._instance.timer.stop(),this._instance=void 0)},e}(eui.Component);__reflect(ContinuePage.prototype,"ContinuePage");var FruitGiftPage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/GiftPage.exml",e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=egret.localStorage.getItem("goldNum");this.lblgold.text=null==t?"0":t,this.groupGiftPos=[236,333,426,515];var e=egret.localStorage.getItem("classicLevelNum"),i=Number(e)%4===0?4:Number(e)%4;this.iNewestNum=null==e?GameData.iClassicLevel:i;var n,r,a,s,o=egret.localStorage.getItem("gobletNum"),g=null==o?1:Number(o);if(this.iPicIndex=g,s=[],console.log("iPicIndex:  "+this.iPicIndex),(this.iPicIndex-2)%4==0?(n=this.iPicIndex-1,r=this.iPicIndex-1,a=!0):(a=!1,r=this.iPicIndex-1),!a)for(var u=r+1;u>=2;u--)if((u-2)%4==0){n=u-1;break}console.log("iBeginIndex:  "+n+"   iEndIndex:  "+r);for(var h=n-1;r>h;h++)s.push(h);console.log("The length is:   "+s.length);for(var h=1;h<=s.length;h++){var p=GameUtil.getTextureByName(GameData.giftImgArr[s[h-1]]);this["img"+h].texture=p}this.progressgift.value=25*this.iNewestNum,this.groupgift.x=this.groupGiftPos[this.iNewestNum-1],100==this.progressgift.value&&(this.groupgift.visible=!1);for(var h=1;h<=this.iNewestNum-1;h++)this["imggou"+h].visible=!0;this.lblnum.text=this.iNewestNum.toString(),GameData.iClassicLevel++,egret.localStorage.setItem("classicLevelNum",GameData.iClassicLevel.toString()),this.iNewestNum==GameData.iTotalNum&&(this.lbltext.text="AWARD",this.imgbtn.texture=GameUtil.getTextureByName("shopadd_png")),this.addEvents()},e.prototype.addEvents=function(){this.nextgroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){this.iNewestNum>=GameData.iTotalNum?Observer.getInstance().fire(Commands.OPEN_RESULT):Observer.getInstance().fire(Commands.CLOSE_GIFT)},this)},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance&&(this._instance=void 0)},e}(eui.Component);__reflect(FruitGiftPage.prototype,"FruitGiftPage");var FruitHomePage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/HomePage.exml",e.init(),e}return __extends(e,t),e.prototype.init=function(){GameUtil.showSceneAnimation(this.grpscale),this.addEffects(),this.addEvents();var t=egret.localStorage.getItem("soundON");(null==t||"true"===t)&&this.addBgSound();for(var e=0,i=0;12>i;i++){var n=egret.localStorage.getItem("shopprop"+i);n&&e++}this.lblnum.text=0==e?"1":e.toString()},e.prototype.addEffects=function(){this.imagebottom.visible=!1,this.imagefont.visible=!1,this.test1.addEventListener("complete",this.onTween1GroupComplete,this),this.test2.addEventListener("complete",this.onTween2GroupComplete,this),this.test1.play(),this.imgdrink.anchorOffsetX=96.5,this.imgdrink.anchorOffsetY=186,egret.Tween.get(this.imgdrink,{loop:!0}).wait(5e3).to({rotation:5},170).wait(180).to({rotation:-4.5},180).to({rotation:3.5},100).wait(50).to({rotation:-4},100).to({rotation:3},200).wait(150).to({rotation:-2.5},200).to({rotation:3},200).wait(200).to({rotation:-3.5},150).to({rotation:4.5},170).wait(150).to({rotation:-5},190),this.grpStart.anchorOffsetX=206.5,this.grpStart.anchorOffsetY=82.5,egret.Tween.get(this.grpStart,{loop:!0}).to({rotation:10},180).to({rotation:-10},180).to({rotation:0},300).wait(150).to({scaleX:1.1,scaleY:1.1},600).to({scaleX:1,scaleY:1},600)},e.prototype.onTween1GroupComplete=function(){this.imagebottom.visible=!0,this.test2.play()},e.prototype.onTween2GroupComplete=function(){this.imagefont.visible=!0,this.test3.play()},e.prototype.addEvents=function(){this.settingbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goSetting,this),this.rankbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goRank,this),this.sharebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goShare,this),this.shopbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goShop,this),this.grpStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goSelect,this)},e.prototype.goSelect=function(){Observer.getInstance().fire(Commands.OPEN_LEVELSELECT)},e.prototype.goSetting=function(){Observer.getInstance().fire(Commands.OPNE_SETTING)},e.prototype.goRank=function(){Observer.getInstance().fire(Commands.OPEN_RANK)},e.prototype.goShare=function(){console.log("goShare")},e.prototype.goShop=function(){Observer.getInstance().fire(Commands.OPEN_SHOP)},e.prototype.addBgSound=function(){if(null==GameData.channelBg){var t=RES.getRes("fruitbg_mp3");GameData.channelBg=t.play(0,0)}},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance=void 0},e}(eui.Component);__reflect(FruitHomePage.prototype,"FruitHomePage");var LevelSelectPage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/LevelSelectPage.exml",e.init(),e}return __extends(e,t),e.prototype.init=function(){GameUtil.showSceneAnimation(this.grpscale);var t=egret.localStorage.getItem("classicLevelNum");this.levelclassic.text="LEVEL "+(null==t?GameData.iClassicLevel:t);
var e=egret.localStorage.getItem("dareLevelNum");this.leveldare.text="LEVEL "+(null==e?"1":e),this.addEvents()},e.prototype.addEvents=function(){this.btngohome.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this),this.groupclassic.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goGame,this),this.groupdare.addEventListener(egret.TouchEvent.TOUCH_TAP,this.goGame,this)},e.prototype.goGame=function(t){t.currentTarget==this.groupclassic?(GameData.sType="classic",Observer.getInstance().fire(Commands.OPEN_NEW_GAME)):t.currentTarget==this.groupdare&&(GameData.sType="dare",Observer.getInstance().fire(Commands.OPEN_NEW_GAME))},e.prototype.backHome=function(){Observer.getInstance().fire(Commands.CLOSE_LEVELSELECT)},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance&&(this._instance=void 0)},e}(eui.Component);__reflect(LevelSelectPage.prototype,"LevelSelectPage");var FruitNewGamePage=function(t){function e(){var e=t.call(this)||this;return e.cutSystem=null,e.iLastChoiceIndex=-1,e.skinName="resource/eui_skins/eui/NewGamePage.exml",e.imgBackground.touchEnabled=!0,e.imgBackground.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onClickView,e),e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=egret.localStorage.getItem("goldNum");this.lblgold.text=null==t?"0":t,this.iWinRotateNum=0,this.progressValue=0,this.iDisFruitClassic=0,this.iAniCount=0,this.iRotateDegr=10,this.iGobletNum=1,this.iRanFrame=0,this.iPopWinNum=0,this.knifeNumber=6,this.rotateNum=1,this.bHideFruit=!1,this.bHideKnife=!1,this.addEvents();var e=egret.localStorage.getItem("dareLevelNum");if(this.iNumLevelWuxian=null==e?1:Number(e),"classic"===GameData.sType)this.imgclassic.visible=!0,this.knifeicon.visible=!1,this.lblKnifenum.visible=!1,this.imgbeizi.visible=!0,this.progresswin.labelDisplay.visible=!1;else{var i=egret.localStorage.getItem("maximum");this.iMaxWuXianScore=null==i?250:Number(i),this.progresswin.value=0,this.progresswin.maximum=this.iMaxWuXianScore,this.progresswin.minimum=0,this.imgclassic.visible=!1,this.lblKnifenum.text="X "+this.knifeNumber,this.knifeicon.visible=!0,this.lblKnifenum.visible=!0,this.imgbeizi.visible=!1,this.progresswin.labelDisplay.visible=!0}this.knifeObjectList=[],this.fruitObjectList=[],this.deleteKnifeList=[],this.deleteFruitList=[],this.deleteDrinkArr=[],this.centerPoint=new egret.Shape,this.centerPoint.graphics.beginFill(16777215),this.centerPoint.graphics.drawRect(0,0,2,2),this.centerPoint.graphics.endFill(),this.centerPoint.x=GameData.stageWidth/2+70,this.centerPoint.y=GameData.stageHeight/2-180,this.centerPoint.anchorOffsetX=1,this.centerPoint.anchorOffsetY=1,this.addChild(this.centerPoint),this.centerPoint.visible=!1,this.centerX=this.centerPoint.x,this.centerY=this.centerPoint.y,this.createNextKnife(),"classic"===GameData.sType?this.createRotateFruit():(this.timer=new egret.Timer(350,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.popupFruit,this),this.timer.start()),this.startTicker()},e.prototype.resetData=function(){this.iWinRotateNum=0,this.progressValue=0,this.iDisFruitClassic=0,this.iAniCount=0,this.iRotateDegr=10,this.iGobletNum=1,this.iRanFrame=0,this.iPopWinNum=0,this.knifeNumber=6,this.bHideKnife=!1,this.bHideFruit=!1,this.knifeObjectList=[],this.deleteKnifeList=[],this.deleteFruitList=[],this.deleteDrinkArr=[];var t=egret.localStorage.getItem("dareLevelNum");if(this.iNumLevelWuxian=null==t?1:Number(t),"classic"===GameData.sType){if(this.fruitObjectList.length>0)for(var e=0,i=this.fruitObjectList;e<i.length;e++){var n=i[e],r=n;r.parent&&this.removeChild(r)}this.fruitObjectList.length=0,this.createRotateFruit()}else{var a=egret.localStorage.getItem("maximum");this.iMaxWuXianScore=null==a?250:Number(a),this.progresswin.maximum=this.iMaxWuXianScore}},e.prototype.createRotateFruit=function(){this.rotateNum=GameData.arrRotate[Math.floor(3*Math.random())];var t=[ClassName.BANANAROTATE,ClassName.APPLEROTATE,ClassName.BASAHAROTATE,ClassName.PEACHROTATE,ClassName.SANDIAROTATE,ClassName.COCONUTROTATE,ClassName.KIWIROTATE,ClassName.LEMONROTATE,ClassName.LIMEROTATE,ClassName.ORANGEROTATE,ClassName.PINEAPPLEROTATE,ClassName.PLUMROTATE,ClassName.POMEGRANATEROTATE,ClassName.REAAPPLEROTATE,ClassName.TOMATOROTATE],e=Math.floor(2*Math.random()),i=Math.floor(3*Math.random()+1);this.fruitObjectList=[];for(var n=0,r=null,a=null,s=100,o=0;o<this.rotateNum;o++){if(6==this.rotateNum)0===e?(this.centerPoint.x=GameData.stageWidth/2+105-s,this.centerPoint.y=GameData.stageHeight/2-100-s,this.centerX=this.centerPoint.x,this.centerY=this.centerPoint.y,null==r&&(r=Math.floor(15*Math.random())),a=t[r](),0==o?(a.x=GameData.stageWidth/2+a.width/2-s,a.y=GameData.stageHeight/2-340-s):1==o?(a.x=GameData.stageWidth/2-a.width/4+45-s,a.y=GameData.stageHeight/2-170-s):2==o?(a.x=GameData.stageWidth/2+1.2*a.width-35-s,a.y=GameData.stageHeight/2-170-s):(a.x=GameData.stageWidth/2+a.width/2-(4-o)*a.width-s,a.y=GameData.stageHeight/2-10-s)):(this.centerPoint.x=GameData.stageWidth/2+105-s,this.centerPoint.y=GameData.stageHeight/2-120-s,this.centerX=this.centerPoint.x,this.centerY=this.centerPoint.y,(null==r||3==o)&&(r=Math.floor(14*Math.random()+1)),a=t[r](),a.x=GameData.stageWidth/2+o%3*(a.width/2+50)-50-s,a.y=GameData.stageHeight/2+Math.floor(o/3)*a.height-220-s);else if(8==this.rotateNum)if(this.centerPoint.x=GameData.stageWidth/2+100-s,this.centerPoint.y=GameData.stageHeight/2-70-s,this.centerX=this.centerPoint.x,this.centerY=this.centerPoint.y,4>o)null==r&&(r=Math.floor(14*Math.random())),a=t[r](),o%2==0?(a.x=GameData.stageWidth/2-(o>0?150:-340)-s,a.y=GameData.stageHeight/2-100-s):(a.x=GameData.stageWidth/2+95-s,a.y=GameData.stageHeight/2-(o>1?300:-100)-s);else{if(4==o){var g=Math.floor(2*Math.random());r+=0==g?1:-1}a=t[15==r||-1==r?0:r](),o%2==0?(a.x=GameData.stageWidth/2-40-s,a.y=GameData.stageHeight/2-(4==o?235:-40)-s):(a.x=GameData.stageWidth/2+230-s,a.y=GameData.stageHeight/2-(5==o?235:-40)-s)}else{if(this.centerPoint.x=GameData.stageWidth/2+115-s,this.centerPoint.y=GameData.stageHeight/2-70-s,this.centerX=this.centerPoint.x,this.centerY=this.centerPoint.y,4!=o)null==r?(r=Math.floor(14*Math.random()+1),n=r):o>4&&(r=n);else{var g=Math.floor(2*Math.random());r+=0==g?1:-1}a=t[15==r||-1==r?2:r](),a.x=GameData.stageWidth/2+o%3*(a.width/2+50)-50-s,a.y=GameData.stageHeight/2+Math.floor(o/3)*(a.height-15)-265-s}a.angel=i,a.sin=Math.sin(a.angel*Math.PI/180),a.cos=Math.cos(a.angel*Math.PI/180),a.flyPoint.x=this.grpjuice.x,a.flyPoint.y=this.grpjuice.y,this.addChild(a),this.setChildIndex(a,1),this.fruitObjectList.push(a),a.addEventListener(egret.Event.ENTER_FRAME,this.fruitFrame,this)}},e.prototype.fruitFrame=function(t){var e=t.target;this.iAniCount++;var i=e.x-this.centerX,n=e.y-this.centerY,r=e.cos*i-e.sin*n*(0==this.iRanFrame?-1:1),a=e.cos*n+e.sin*i*(0==this.iRanFrame?-1:1);if(2e3==this.iAniCount){e.x=e.x,e.y=e.y;for(var s=0,o=this.fruitObjectList;s<o.length;s++){var g=o[s],u=g;u.rotation=this.iRotateDegr}egret.setTimeout(function(){this.iAniCount=0,this.iRanFrame=Math.floor(2*Math.random()),this.iRotateDegr=0==this.iRanFrame?10*Math.random()+5:-(10*Math.random()+5);for(var t=Math.floor(3*Math.random()),e=0,i=this.fruitObjectList;e<i.length;e++){var n=i[e],r=n;r.cos=GameData.cosArr[t],r.sin=GameData.sinArr[t]}},this,1600)}else this.iAniCount>0&&this.iAniCount<=2e3&&(e.x=this.centerX+r,e.y=this.centerY+a)},e.prototype.popupFruit=function(){this.fruitNum=Math.ceil(3*Math.random());for(var t=[ClassName.APPLE,ClassName.BANANA,ClassName.BASAHA,ClassName.PEACH,ClassName.SANDIA,ClassName.COCONUT,ClassName.KIWI,ClassName.LEMON,ClassName.LIME,ClassName.ORANGE,ClassName.PINEAPPLE,ClassName.PLUM,ClassName.POMEGRANATE,ClassName.REAAPPLE,ClassName.TOMATO],e=0;e<this.fruitNum;e++){var i=t[Math.floor(15*Math.random())]();this.fruitObjectList.push(i),this.addChildAt(i,1)}},e.prototype.generateAniDrink=function(t){if(GameUtil.bPlaySound()&&GameUtil.playSound("fruitok_mp3"),this.imgDrink=new egret.Bitmap,t){var e=egret.localStorage.getItem("gobletNum");this.iGobletNum=null==e?this.iGobletNum:Number(e),this.imgDrink.texture=GameUtil.getTextureByName(this.iGobletNum+"_2_png"),this.iGobletNum>20&&(this.iGobletNum=1),this.iGobletNum++,egret.localStorage.setItem("gobletNum",this.iGobletNum.toString())}else this.imgDrink.texture=GameUtil.getTextureByName("drink1_png");this.imgDrink.anchorOffsetX=t?125:48,this.imgDrink.anchorOffsetY=t?125:79,this.imgDrink.x=147,this.imgDrink.y=880,this.addChild(this.imgDrink),this.deleteDrinkArr.push(this.imgDrink),this.setChildIndex(this.imgDrink,2),this.setChildIndex(this.imgclassic,1),egret.setTimeout(function(){egret.Tween.get(this.imgDrink,{loop:!0}).to({rotation:360},270),egret.Tween.get(this).to({factor:1},1e3)},this,1e3)},Object.defineProperty(e.prototype,"factor",{get:function(){return 0},set:function(t){var e=this.iWinRotateNum%4==0?!0:!1,i=GameData.stageHeight-(e?300:250);this.imgDrink.x=(1-t)*(1-t)*145+2*t*(1-t)*270+t*t*375,this.imgDrink.y=(1-t)*(1-t)*880+2*t*(1-t)*710+t*t*i,this.imgDrink.y===i&&(egret.Tween.pauseTweens(this.imgDrink),this.imgDrink.rotation=0,GameUtil.bPlaySound()&&GameUtil.playSound("fruitoknext_mp3"),egret.Tween.get(this.imgDrink).wait(500).to({x:GameData.stageWidth+200},800).call(this.deleteObjDrink,this,[e,this.iGobletNum-1+"_1_png"]))},enumerable:!0,configurable:!0}),e.prototype.deleteObjDrink=function(t,e){if(0!=this.deleteDrinkArr.length){for(var i=0,n=this.deleteDrinkArr;i<n.length;i++){var r=n[i];this.removeChild(r)}this.deleteDrinkArr.length=0,t&&(GameData.strImgName=e,Observer.getInstance().fire(Commands.OPEN_AWARD)),egret.setTimeout(function(){GameData.knife&&(GameData.knife.visible=!0,this.bHideKnife=!1,this.imgBackground.touchEnabled=!0),this.createRotateFruit()},this,500)}},e.prototype.createNextKnife=function(){var t=this.getNewerKnifePic();GameData.knife=new Knife(t),GameData.knife.anchorOffsetX=GameData.knife.width/2,GameData.knife.anchorOffsetY=GameData.knife.height/2,GameData.knife.x=GameData.stageWidth/2,GameData.knife.y=GameData.stageHeight/2+350,this.addChild(GameData.knife),this.setChildIndex(GameData.knife,2),GameData.knife.scaleX=.6,GameData.knife.scaleY=.6,this.bHideKnife&&(GameData.knife.visible=!1),egret.Tween.get(GameData.knife).to({scaleX:1,scaleY:1},100).call(function(){egret.Tween.get(GameData.knife,{loop:!0}).to({y:GameData.stageHeight/2+350},500).to({y:GameData.stageHeight/2+390},500)},this)},e.prototype.getNewerKnifePic=function(){var t=egret.localStorage.getItem("shopKuangIndex"),e="knife1_png";if(t){this.iLastChoiceIndex=Number(t);var i=egret.localStorage.getItem("shopprop"+t);e=null==i?e:i}else this.iLastChoiceIndex=-1;return e},e.prototype.throwKnife=function(){GameData.knife&&this.knifeObjectList.push(GameData.knife)},e.prototype.startTicker=function(){egret.ticker.$startTick(this.update,this)},e.prototype.stopTicker=function(){egret.ticker.$stopTick(this.update,this)},e.prototype.update=function(t){if(this.knifeObjectList.length>0){for(var e=0,i=this.knifeObjectList;e<i.length;e++){var n=i[e];egret.Tween.pauseTweens(n),n.update(t)}this.collision()}return!0},e.prototype.collision=function(){for(var t,e,i,n,r=0,a=this.fruitObjectList;r<a.length;r++){var s=a[r];s instanceof BaseFruit?(e=s,t=new egret.Rectangle(s.x,s.y,s.width,s.height)):s instanceof BaseRotateFruit&&(i=s,s instanceof BananaRotate?t=new egret.Rectangle(Math.round(s.x-31),Math.round(s.y-66),62,132):s instanceof AppleRotate?t=new egret.Rectangle(Math.round(s.x-41),Math.round(s.y-52),82,104):s instanceof BasahaRotate?t=new egret.Rectangle(Math.round(s.x-39),Math.round(s.y-49),78,98):s instanceof PeachRotate?t=new egret.Rectangle(Math.round(s.x-39),Math.round(s.y-55),78,110):s instanceof SandiaRotate?t=new egret.Rectangle(Math.round(s.x-63),Math.round(s.y-79),126,158):s instanceof CoconutRotate?t=new egret.Rectangle(Math.round(s.x-58),Math.round(s.y-76),116,152):s instanceof KiwiRotate?t=new egret.Rectangle(Math.round(s.x-47),Math.round(s.y-56),94,112):s instanceof LemonRotate?t=new egret.Rectangle(Math.round(s.x-44),Math.round(s.y-55),88,110):s instanceof LimeRotate?t=new egret.Rectangle(Math.round(s.x-45),Math.round(s.y-55),90,110):s instanceof OrangeRotate?t=new egret.Rectangle(Math.round(s.x-50),Math.round(s.y-52),100,104):s instanceof PineappleRotate?t=new egret.Rectangle(Math.round(s.x-49),Math.round(s.y-64),98,128):s instanceof PlumRotate?t=new egret.Rectangle(Math.round(s.x-41),Math.round(s.y-53),82,106):s instanceof PomegranateRotate?t=new egret.Rectangle(Math.round(s.x-46),Math.round(s.y-51),92,102):s instanceof RedAppleRotate?t=new egret.Rectangle(Math.round(s.x-40),Math.round(s.y-50),80,100):s instanceof TomatoRotate&&(t=new egret.Rectangle(Math.round(s.x-51),Math.round(s.y-51),102,102)));for(var o=0,g=this.knifeObjectList;o<g.length;o++){var u=g[o];if(u instanceof Knife)if(-1==this.iLastChoiceIndex||0==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+74),Math.round(u.y+11),72,168):1==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+77),Math.round(u.y+15),40,178):2==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+73),Math.round(u.y+15),54,165):3==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+91),Math.round(u.y+13),30,170):4==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+83),Math.round(u.y+22),44,147):5==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+36),Math.round(u.y+39),138,138):6==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+37),Math.round(u.y+39),137,134):7==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+37),Math.round(u.y+39),125,117):8==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+71),Math.round(u.y+25),63,151):9==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+61),Math.round(u.y+10),75,175):10==this.iLastChoiceIndex?n=new egret.Rectangle(Math.round(u.x+68),Math.round(u.y+17),76,170):11==this.iLastChoiceIndex&&(n=new egret.Rectangle(Math.round(u.x+42),Math.round(u.y+13),115,172)),n.intersects(t)){if(GameUtil.bPlaySound()&&GameUtil.playSound("fruitbingo_mp3"),"classic"!=GameData.sType){var h=Math.floor(15*Math.random()+5);this.produceRanNum(h),this.progressValue+=h,this.progresswin.value=this.progressValue}else{this.iDisFruitClassic++,this.bHideFruit=!0;var p=this["imgjuicer"+this.iDisFruitClassic],l=this.iDisFruitClassic-1;p.visible=!0,i instanceof AppleRotate||i instanceof LimeRotate||i instanceof PeachRotate||i instanceof SandiaRotate?p.source=GameData.juicerArr1[l]:i instanceof CoconutRotate||i instanceof KiwiRotate?p.source=GameData.juicerArr5[l]:i instanceof BananaRotate||i instanceof LemonRotate||i instanceof PineappleRotate?p.source=GameData.juicerArr6[l]:i instanceof TomatoRotate||i instanceof PlumRotate?p.source=GameData.juicerArr4[l]:i instanceof OrangeRotate?p.source=GameData.juicerArr2[l]:p.source=GameData.juicerArr3[l]}s instanceof BaseFruit?this.deleteFruitList.push(e):s instanceof BaseRotateFruit&&this.deleteFruitList.push(i),this.deleteKnifeList.push(u)}else"classic"===GameData.sType&&u.y<-100&&0==this.bHideFruit&&this.iPopWinNum++}if(this.knifeObjectList.length>0)for(var c=0,m=this.knifeObjectList;c<m.length;c++){var _=m[c],d=_;d.y<-100&&this.knifeObjectList.splice(this.knifeObjectList.indexOf(d),1)}if(this.deleteKnifeList.length>0&&(this.deleteKnifeList.length=0),this.deleteFruitList.length>0){for(var f=0,R=this.deleteFruitList;f<R.length;f++){var _=R[f],E=void 0;_ instanceof BaseFruit?(E=_,E.cutFruit()):_ instanceof BaseRotateFruit&&(E=_,E.cutFruit(E.effectIndex)),E.removeEventListener(egret.Event.ENTER_FRAME,this.fruitFrame,this),this.fruitObjectList.splice(this.fruitObjectList.indexOf(_),1)}this.deleteFruitList.length=0}}if("classic"===GameData.sType){if(this.iDisFruitClassic==this.rotateNum){this.bHideKnife=!0,this.iPopWinNum=0,this.progressValue+=25,this.progresswin.value=this.progressValue,this.iDisFruitClassic=0,this.lblgold.text=(Number(this.lblgold.text)+5).toString(),egret.localStorage.setItem("goldNum",this.lblgold.text),this.iWinRotateNum++,egret.localStorage.setItem("replayNum",this.iWinRotateNum.toString());for(var S=1;9>=S;S++){var p=this["imgjuicer"+S];p.visible=!1}this.generateAniDrink(this.iWinRotateNum%4==0?!0:!1),this.iWinRotateNum>0&&this.iWinRotateNum%4==0&&egret.setTimeout(function(){GameData.iWinNum++,Observer.getInstance().fire(Commands.OPEN_GIFT),this.progressValue=0,this.progresswin.value=this.progressValue},this,4300)}this.iDisFruitClassic<this.rotateNum&&egret.setTimeout(function(){1==this.iPopWinNum?(GameUtil.bShake()&&"Android"==egret.Capabilities.os&&egret.ExternalInterface.call("callNative","1"),Observer.getInstance().fire(Commands.OPEN_CONTINUE)):2==this.iPopWinNum&&(this.iPopWinNum=0,GameUtil.bShake()&&"Android"==egret.Capabilities.os&&egret.ExternalInterface.call("callNative","1"),Observer.getInstance().fire(Commands.OPEN_REPLAY))},this,1300)}else 0===this.knifeNumber?(GameData.bWuXianKnifeZero=!0,this.lblKnifenum.text="X 0",this.progressValue>=this.progresswin.maximum?(GameData.bWuXianOpenWin=!0,this.progressValue=0,this.progresswin.value=0,this.knifeNumber=6,this.iNumLevelWuxian++,this.iMaxWuXianScore+=10,this.lblgold.text=(Number(this.lblgold.text)+35).toString(),egret.localStorage.setItem("goldNum",this.lblgold.text),egret.localStorage.setItem("maximum",this.iMaxWuXianScore.toString()),egret.localStorage.setItem("dareLevelNum",this.iNumLevelWuxian.toString()),Observer.getInstance().fire(Commands.OPEN_AWARD),egret.setTimeout(function(){this.lblKnifenum.text="X "+this.knifeNumber},this,500)):this.progressValue<this.progresswin.maximum&&(this.knifeNumber=6,egret.setTimeout(function(){GameData.bWuXianOpenWin||(Observer.getInstance().fire(Commands.OPEN_REPLAY),this.progressValue=0,this.progresswin.value=0,this.lblKnifenum.text="X "+this.knifeNumber)},this,1e3))):this.progressValue>=this.progresswin.maximum&&(GameData.bWuXianOpenWin=!0,this.progressValue=0,this.progresswin.value=0,this.knifeNumber=6,this.iMaxWuXianScore+=10,egret.localStorage.setItem("maximum",this.iMaxWuXianScore.toString()),this.iNumLevelWuxian++,this.lblgold.text=(Number(this.lblgold.text)+35).toString(),egret.localStorage.setItem("goldNum",this.lblgold.text),egret.localStorage.setItem("dareLevelNum",this.iNumLevelWuxian.toString()),Observer.getInstance().fire(Commands.OPEN_AWARD),egret.setTimeout(function(){this.lblKnifenum.text="X "+this.knifeNumber},this,500))},e.prototype.deleteFruit=function(){this.removeChild(this.curDeleteFruit)},e.prototype.addEvents=function(){this.btnpause.addEventListener(egret.TouchEvent.TOUCH_TAP,this.pauseGame,this)},e.prototype.pauseGame=function(){Observer.getInstance().fire(Commands.OPEN_QUIT)},e.prototype.produceRanNum=function(t){var e=new eui.Label;e.size=50,e.x=GameData.stageWidth/2,e.y=GameData.stageHeight/2,e.text="+"+t,this.addChildAt(e,1);var i=Math.floor(2*Math.random()),n=Math.floor(80*Math.random()+30);egret.Tween.get(e).to({x:GameData.stageWidth/2+(1==i?-n:n),y:GameData.stageHeight/2+(1==i?-n:n)},1e3).call(function(){e.parent&&this.removeChild(e)},this)},e.prototype.beiziAnimate=function(){var t=RES.getRes("star3_png"),e=RES.getRes("bottlefire_json");null==this.cutSystem&&(this.cutSystem=new particle.GravityParticleSystem(t,e),this.cutSystem.emissionTime=800,this.cutSystem.anchorOffsetX=this.grpjuice.width/2,this.cutSystem.anchorOffsetY=this.grpjuice.height/2,this.cutSystem.x=this.grpjuice.x-this.grpjuice.width/4,this.cutSystem.y=this.grpjuice.y-this.grpjuice.height/2+10,this.addChild(this.cutSystem),this.cutSystem.start(),egret.setTimeout(function(){this.removeChild(this.cutSystem),this.cutSystem=null},this,1e3)),egret.Tween.get(this.grpjuice).wait(300).to({scaleY:.9},150).to({scaleY:1},150).to({scaleY:.85},150).to({scaleY:1},150).wait(300)},e.prototype.onClickView=function(t){this.imgBackground.touchEnabled=!1,"dare"===GameData.sType&&(GameData.bWuXianKnifeZero||(this.knifeNumber--,this.lblKnifenum.text="X "+this.knifeNumber)),"classic"===GameData.sType?this.bHideKnife||(this.throwKnife(),this.bHideFruit=!1,egret.setTimeout(function(){this.imgBackground.touchEnabled=!0,this.createNextKnife()},this,1e3)):"dare"===GameData.sType&&(this.throwKnife(),egret.setTimeout(function(){this.imgBackground.touchEnabled=!0,this.createNextKnife()},this,1e3))},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance&&(this._instance=void 0)},e}(eui.Component);__reflect(FruitNewGamePage.prototype,"FruitNewGamePage");var FruitQuitPage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/QuitPage.exml",e.init(),e}return __extends(e,t),e.prototype.init=function(){this.addEvents()},e.prototype.addEvents=function(){this.backbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Observer.getInstance().fire(Commands.CLOSE_NEW_GAME)},this),this.continuebtn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Observer.getInstance().fire(Commands.CLOSE_QUIT)},this)},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance&&(this._instance=void 0)},e}(eui.Component);__reflect(FruitQuitPage.prototype,"FruitQuitPage");var RankPage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/RankPage.exml",e.init(),e}return __extends(e,t),e.prototype.init=function(){GameUtil.showSceneAnimation(this.grpscale),this.addEvents()},e.prototype.addEffects=function(){},e.prototype.addEvents=function(){this.btngohome.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this)},e.prototype.backHome=function(){console.log("back home"),Observer.getInstance().fire(Commands.CLOSE_RANK)},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance=void 0},e}(eui.Component);__reflect(RankPage.prototype,"RankPage");var FruitReplayPage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/ReplayPage.exml",e.init(),e}return __extends(e,t),e.prototype.init=function(){var t=egret.localStorage.getItem("goldNum");this.lblgold.text=null==t?"0":t;var e=egret.localStorage.getItem("classicLevelNum"),i=null==e?1:e;this.lblNum.text="Level "+i;var n=egret.localStorage.getItem("replayNum"),r=null==n?1:1+Number(n)%4;this.lblprogress.text=r+"/4",this.addEvents()},e.prototype.addEvents=function(){this.btngohome.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Observer.getInstance().fire(Commands.CLOSE_NEW_GAME)},this),this.buygroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log("")},this),this.replaygroup.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Observer.getInstance().fire(Commands.CLOSE_REPLAY),"dare"===GameData.sType&&(GameData.bWuXianKnifeZero=!1)},this)},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance&&(this._instance=void 0)},e}(eui.Component);__reflect(FruitReplayPage.prototype,"FruitReplayPage");var FruitResultPage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/ResultPage.exml",e.init(),e}return __extends(e,t),e.prototype.init=function(){this.deg=0,this.duration=0,this.iLotteryCount=0,this.iGiftCount=4,this.iRanGift=0,this.groupturn1.touchEnabled=!1,this.groupturn2.touchEnabled=!0,this.grpCur=this.groupturn1;var t=egret.localStorage.getItem("goldNum");this.lblgold.text=null==t?"0":t,this.arrDegreeF=[45+Math.floor(20*Math.random()+3),135+Math.floor(20*Math.random()+3),225+Math.floor(20*Math.random()+3),315+Math.floor(20*Math.random()+3)],this.arrDegreeT=[45+Math.floor(20*Math.random()+3),135+Math.floor(20*Math.random()+3),265+Math.floor(20*Math.random()+3)],this.arrGoldNum=[75,50,35],this.addEvents()},e.prototype.addEvents=function(){this.groupbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.getGift,this)},e.prototype.getGift=function(){var t=this;if(this.groupbtn.touchEnabled=!1,this.iLotteryCount>=2)this.iLotteryCount=0,Observer.getInstance().fire(Commands.CLOSE_RESULT);else{var e=0==this.iLotteryCount?4:3;this.iRanGift=Math.floor(Math.random()*e),0==this.iLotteryCount?this.deg=360*Math.ceil(4*Math.random()+1)+this.arrDegreeF[this.iRanGift]:this.deg=360*Math.ceil(4*Math.random()+1)+this.arrDegreeT[this.iRanGift],this.duration=this.calcDuration(this.deg),this.startTurn(function(){t.lotteryDone()})}},e.prototype.calcDuration=function(t){return 10*t},e.prototype.lotteryDone=function(){this.iLotteryCount++;if(1==this.iLotteryCount){if(0==this.iRanGift)egret.localStorage.setItem("shopprop7","knife8_png");else{var t=Number(this.lblgold.text)+this.arrGoldNum[this.iRanGift-1];this.lblgold.text=t.toString(),egret.localStorage.setItem("goldNum",t.toString())}egret.setTimeout(function(){this.groupturn1.visible=!1,this.groupturn2.visible=!0,this.grpCur=this.groupturn2,this.lblbtntext.size=32,this.lblbtntext.text="SPIN AGAIN",this.iGiftCount=3,this.groupbtn.touchEnabled=!0},this,2e3)}else if(this.iLotteryCount>=2){if(0==this.iRanGift)egret.localStorage.setItem("shopprop7","knife8_png");else{var t=Number(this.lblgold.text)+this.arrGoldNum[this.iRanGift-1==1?2:this.iRanGift-1];this.lblgold.text=t.toString(),egret.localStorage.setItem("goldNum",t.toString())}this.lblbtntext.size=40,this.lblbtntext.text="NEXT LEVEL",this.imgbtn.texture=GameUtil.getTextureByName("start_png"),this.groupbtn.touchEnabled=!0}},e.prototype.startTurn=function(t){egret.Tween.get(this.grpCur).to({rotation:this.grpCur.rotation-20},500,egret.Ease.sineIn).to({rotation:this.deg},this.duration,egret.Ease.backOut).call(function(){t()})},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance&&(this._instance=void 0)},e}(eui.Component);__reflect(FruitResultPage.prototype,"FruitResultPage");var SettingPage=function(t){function e(){var e=t.call(this)||this;return e.skinName="resource/eui_skins/eui/SettingPage.exml",e.init(),e}return __extends(e,t),e.prototype.init=function(){GameUtil.showSceneAnimation(this.grpscale);var t=egret.localStorage.getItem("soundON");null==t||"true"===t?(this.togglesound.label="ON",this.togglesound.selected=!1):(this.togglesound.label="OFF",this.togglesound.selected=!0);var e=egret.localStorage.getItem("shakeON");null==e||"true"===e?(this.toggleshake.label="ON",this.toggleshake.selected=!1):(this.toggleshake.label="OFF",this.toggleshake.selected=!0),this.addEvents()},e.prototype.addEvents=function(){this.btngohome.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this),this.togglesound.addEventListener(eui.UIEvent.CHANGE,this.soundChange,this),this.toggleshake.addEventListener(eui.UIEvent.CHANGE,this.shakeChange,this)},e.prototype.soundChange=function(t){console.log("soundChange:  "+t.target.selected);var e=t.currentTarget,i=t.currentTarget.selected;if(i)e.label="OFF",egret.localStorage.setItem("soundON","false"),GameData.channelBg&&GameData.channelBg.stop();else{e.label="ON",egret.localStorage.setItem("soundON","true");var n=RES.getRes("fruitbg_mp3");GameData.channelBg=n.play(0,0)}},e.prototype.shakeChange=function(t){console.log("shakeChange:  "+t.target.selected);var e=t.currentTarget,i=t.currentTarget.selected;i?(e.label="OFF",egret.localStorage.setItem("shakeON","false")):(e.label="ON",egret.localStorage.setItem("shakeON","true"))},e.prototype.backHome=function(){console.log("back home"),Observer.getInstance().fire(Commands.CLOSE_SETTING)},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance=void 0},e}(eui.Component);__reflect(SettingPage.prototype,"SettingPage");var ShopPage=function(t){function e(){var e=t.call(this)||this;return e.listData=new eui.ArrayCollection,e.iOwnGoldNum=0,e.skinName="resource/eui_skins/eui/ShopPage.exml",e.scrollershop.bounces=!0,e.init(),e}return __extends(e,t),e.prototype.init=function(){GameUtil.showSceneAnimation(this.grpscale);var t=egret.localStorage.getItem("goldNum");this.iOwnGoldNum=null==t?0:Number(t),this.lblgold.text=this.iOwnGoldNum.toString(),this.addList(),this.addEvents()},e.prototype.addList=function(){this.shopList.touchEnabled=!0,this.shopList.useVirtualLayout=!0,this.shopList.itemRenderer=ShopBarItemRender;for(var t=egret.localStorage.getItem("shopKuangIndex"),e=[],i=0;12>i;i++){var n={},r=egret.localStorage.getItem("shopprop"+i);n.texture=null==r?GameData.strDefaultProp:r,n.bgtexture=null==r?GameData.shopPropBg[0]:GameData.shopPropBg[1],t&&i==Number(t)?(n.type=1,egret.localStorage.setItem("shopKuangIndex",t)):null==t&&0==i?(egret.localStorage.setItem("shopKuangIndex","0"),n.bgtexture=GameData.shopPropBg[1],n.texture=GameData.shopImgArr[0],egret.localStorage.setItem("shopprop0",GameData.shopImgArr[0]),n.type=1):n.type=0,e.push(n)}this.listData.source=e,this.shopList.dataProvider=this.listData,this.shopList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTap,this)},e.prototype.onTap=function(t){var e=t.itemIndex;egret.localStorage.setItem("shopKuangIndex",e.toString());var i=t.itemRenderer;t.item;this.itemSelected=i;for(var n=[],r=0;12>r;r++){var a={},s=egret.localStorage.getItem("shopprop"+r);a.texture=null==s?GameData.strDefaultProp:s,a.bgtexture=null==s?GameData.shopPropBg[0]:GameData.shopPropBg[1],r==e?a.type=1:a.type=0,n.push(a)}this.listData.source=n,this.shopList.dataProvider=this.listData},e.prototype.onChange=function(t){},e.prototype.addEvents=function(){this.btngohome.addEventListener(egret.TouchEvent.TOUCH_TAP,this.backHome,this),this.groupbuy.addEventListener(egret.TouchEvent.TOUCH_TAP,this.leftBtnTouch,this),this.groupadd.addEventListener(egret.TouchEvent.TOUCH_TAP,this.rightBtnTouch,this)},e.prototype.backHome=function(){console.log("back home"),Observer.getInstance().fire(Commands.CLOSE_SHOP)},e.prototype.leftBtnTouch=function(){if(console.log("leftBtnTouch"),this.iOwnGoldNum>=250&&(this.iOwnGoldNum-=250,this.iOwnGoldNum>=0)){var t=GameData.shopImgArr[Math.floor(12*Math.random()+1)];egret.localStorage.setItem("shopprop"+this.itemSelected.itemIndex,t),this.itemSelected.imgprop.texture=GameUtil.getTextureByName(t),this.itemSelected.imgbg.texture=GameUtil.getTextureByName("propbg2_png")}egret.localStorage.setItem("goldNum",this.iOwnGoldNum.toString()),this.lblgold.text=this.iOwnGoldNum.toString()},e.prototype.rightBtnTouch=function(){this.iOwnGoldNum+=35,egret.localStorage.setItem("goldNum",this.iOwnGoldNum.toString()),this.lblgold.text=this.iOwnGoldNum.toString()},e.getInstance=function(){return void 0===this._instance&&(this._instance=new e),this._instance},e.destroyInstance=function(){this._instance=void 0},e}(eui.Component);__reflect(ShopPage.prototype,"ShopPage");